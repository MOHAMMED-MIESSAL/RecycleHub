<app-navbar></app-navbar>


<div class="flex items-center justify-center p-12 pb-0 mt-16 ">
  <div class="mx-auto w-full max-w-[550px] bg-white">
    <form [formGroup]="requestForm" (ngSubmit)="addRequest()">
      <div class="mb-5">
        <label class="mb-3 block text-base font-medium text-[#07074D]">
          Type of Waste
        </label>
        <div>
          <label class="flex bg-gray-100 text-gray-700 rounded-md px-3 py-2 my-3  hover:bg-indigo-300 cursor-pointer ">
            <input type="checkbox" (change)="toggleWasteType('Plastique', $event)">
            <i class="pl-2">Plastique</i>
          </label>

          <label class="flex bg-gray-100 text-gray-700 rounded-md px-3 py-2 my-3  hover:bg-indigo-300 cursor-pointer ">
            <input type="checkbox" (change)="toggleWasteType('Papier', $event)">
            <i class="pl-2">Papier</i>
          </label>

          <label class="flex bg-gray-100 text-gray-700 rounded-md px-3 py-2 my-3  hover:bg-indigo-300 cursor-pointer ">
            <input type="checkbox" (change)="toggleWasteType('Verre', $event)">
            <i class="pl-2">Verre</i>
          </label>

          <label class="flex bg-gray-100 text-gray-700 rounded-md px-3 py-2 my-3  hover:bg-indigo-300 cursor-pointer ">
            <input type="checkbox" (change)="toggleWasteType('Métal', $event)">
            <i class="pl-2">Métal</i>
          </label>

        </div>
      </div>

      <div class="mb-5" *ngFor="let waste of wasteDetailsArray.controls; let i = index">
        <label for="weight" class="mb-3 block text-base font-medium text-[#07074D]">
          {{ waste.get('type')?.value }} - Poids (g) :
        </label>
        <input id="weight" type="number" [formControl]="getWeightControl(waste)" (input)="onWeightChange()" min="0"
               required
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"/>
      </div>

      <div class="mb-5">
        <label class="mb-3 block text-base font-medium text-[#07074D]">
          Total Weight (g)
        </label>
        <span
          class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md">
          {{ totalWeight }}
        </span>
      </div>

      <div class="mb-5">
        <label for="address" class="mb-3 block text-base font-medium text-[#07074D]">
          Address
        </label>
        <input type="text" formControlName="address" id="address" placeholder="Enter your address"
               class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"/>
      </div>

      <div class="-mx-3 flex flex-wrap">
        <div class="w-full px-3 sm:w-1/2">
          <div class="mb-5">
            <label for="date" class="mb-3 block text-base font-medium text-[#07074D]">
              Date
            </label>
            <input type="date" formControlName="date" id="date"
                   class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"/>
          </div>
        </div>
        <div class="w-full px-3 sm:w-1/2">
          <div class="mb-5">
            <label for="time" class="mb-3 block text-base font-medium text-[#07074D]">
              Time
            </label>
            <select formControlName="timeSlot" id="time"
                    class="w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md">
              <option value="09h00 - 12h00">09h00 - 12h00</option>
              <option value="12h00 - 15h00">12h00 - 15h00</option>
              <option value="15h00 - 18h00">15h00 - 18h00</option>
            </select>
          </div>
        </div>
      </div>

      <div class="mb-5">
        <label for="note" class="mb-3 block text-base font-medium text-[#07074D]">
          Note
        </label>
        <textarea id="note" formControlName="notes" placeholder="Enter your notes"
                  class="border border-gray-400 p-2 w-full rounded-lg focus:outline-none focus:border-blue-400"
                  rows="5"></textarea>
      </div>

      <div class="mb-5">
        <label class="mb-3 block text-base font-medium text-red-500">
          The weight must be between 1000g and 10000g . <br>
          Currently: {{ totalWeight }}g.
        </label>

      </div>

      <div>
        <button type="submit" [disabled]="requestForm.invalid || weightError"
                class="hover:shadow-form w-full rounded-md bg-[#6A64F1] py-3 px-8 text-center text-base font-semibold text-white outline-none">
          Book Appointment
        </button>
      </div>
    </form>
  </div>
</div>

